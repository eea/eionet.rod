<?xml version="1.0"?>
<!--
 * The contents of this file are subject to the Mozilla Public
 * License Version 1.1 (the "License"); you may not use this file
 * except in compliance with the License. You may obtain a copy of
 * the License at http://www.mozilla.org/MPL/
 *
 * Software distributed under the License is distributed on an "AS
 * IS" basis, WITHOUT WARRANTY OF ANY KIND, either express or
 * implied. See the License for the specific language governing
 * rights and limitations under the License.
 *
 * The Original Code is "EINRC-4 / WebROD Project".
 *
 * The Initial Developer of the Original Code is TietoEnator.
 * The Original Code code was developed for the European
 * Environment Agency (EEA) under the IDA/EINRC framework contract.
 *
 * Copyright (C) 2000-2002 by European Environment Agency.  All
 * Rights Reserved.
 *
 * Original Code: Kaido Laine (TietoEnator)
 * -->
<xrs:XmlData xmlns:xrs="http://www.tietoenator.com/ee/2000/XRS">
	<xrs:RowSet name="Main">
		<T_OBLIGATION>
			<PK_RA_ID/>
			<TITLE/>
			<RESPONSIBLE_ROLE/>
			<!--DEADLINE expression="NEXT_DEADLINE AS DEADLINE"/-->
			<DEADLINE expression="IF(NEXT_DEADLINE IS NULL, NEXT_REPORTING, NEXT_DEADLINE) AS DEADLINE"/>
			<NEXT_DEADLINE/>
			<DEADLINE2 expression="NEXT_DEADLINE2 AS DEADLINE2"/>
			<NEXT_REPORTING/>
			<FK_DELIVERY_COUNTRY_IDS/>
			<TERMINATE/>
			<FK_SOURCE_ID/>
			<FK_CLIENT_ID/>
		</T_OBLIGATION>
		<xrs:Constraint>TERMINATE='N'</xrs:Constraint>
		<T_ROLE alias="RESPONSIBLE" relation="CONCAT(T_OBLIGATION.RESPONSIBLE_ROLE,'-',LCASE(T_SPATIAL.SPATIAL_TWOLETTER))=RESPONSIBLE.ROLE_ID" reltype="outer">
			<ROLE_DESCR expression="IF(PERSON != '', IF(INSTITUTE='', PERSON, CONCAT(PERSON, ' [', INSTITUTE, ']')), ROLE_NAME) AS ROLE_DESCR"/>
			<ROLE_NAME/>
			<ROLE_EMAIL/>
			<ROLE_ID/>
			<ROLE_URL/>
			<ROLE_MEMBERS_URL/>
			<PERSON/>
			<INSTITUTE/>
		</T_ROLE>
		<T_CLIENT_LNK relation="T_CLIENT_LNK.TYPE='A' AND T_CLIENT_LNK.STATUS='M' AND T_CLIENT_LNK.FK_OBJECT_ID=T_OBLIGATION.PK_RA_ID" reltype="outer">
			<FK_CLIENT_ID/>
			<FK_OBJECT_ID/>
			<STATUS/>
			<TYPE/>
		</T_CLIENT_LNK>
		<T_CLIENT relation="T_CLIENT.PK_CLIENT_ID = T_CLIENT_LNK.FK_CLIENT_ID" reltype="outer">
			<PK_CLIENT_ID/>
			<CLIENT_NAME/>
			<CLIENT_DESCR expression="IF(CLIENT_ACRONYM='', CLIENT_NAME, CLIENT_ACRONYM) AS CLIENT_DESCR"/>
		</T_CLIENT>
		<T_RASPATIAL_LNK relation="T_RASPATIAL_LNK.FK_RA_ID=T_OBLIGATION.PK_RA_ID">
			<FK_RA_ID/>
			<FK_SPATIAL_ID/>
		</T_RASPATIAL_LNK>
		<T_SPATIAL relation="T_RASPATIAL_LNK.FK_SPATIAL_ID=T_SPATIAL.PK_SPATIAL_ID">
			<PK_SPATIAL_ID/>
			<SPATIAL_NAME/>
			<SPATIAL_TWOLETTER/>
		</T_SPATIAL>
		<xrs:Constraint>PK_SPATIAL_ID like @COUNTRY_ID</xrs:Constraint>
		<T_RAISSUE_LNK relation="T_OBLIGATION.PK_RA_ID=T_RAISSUE_LNK.FK_RA_ID">
			<FK_RA_ID/>
			<FK_ISSUE_ID/>
		</T_RAISSUE_LNK>
		<xrs:Constraint>FK_ISSUE_ID=@ISSUE_ID</xrs:Constraint>
		<T_DELIVERY relation="T_OBLIGATION.PK_RA_ID=T_DELIVERY.FK_RA_ID AND T_DELIVERY.FK_SPATIAL_ID=T_SPATIAL.PK_SPATIAL_ID" reltype="outer">
			<PK_DELIVERY_ID/>
			<FK_SPATIAL_ID/>
			<FK_RA_ID/>
		</T_DELIVERY>
		<T_SOURCE relation="T_SOURCE.PK_SOURCE_ID=T_OBLIGATION.FK_SOURCE_ID" reltype="outer">
			<PK_SOURCE_ID/>
			<SOURCE_CODE/>
		</T_SOURCE>
		<xrs:Ordering>@ORD</xrs:Ordering>
	</xrs:RowSet>
	<xrs:RowSet name="EnvIssue">
		<T_ISSUE>
			<PK_ISSUE_ID/>
			<ISSUE_NAME/>
		</T_ISSUE>
		<xrs:Ordering>T_ISSUE.ISSUE_NAME</xrs:Ordering>
	</xrs:RowSet>
	<xrs:RowSet name="Dummy">
		<T_DUMMY>
			<DUMMY/>
		</T_DUMMY>
		<xrs:Constraint>DUMMY=@COUNTRY_ID</xrs:Constraint>
	</xrs:RowSet>
	<xrs:RowSet name="IssueData">
		<T_ISSUE>
			<ISSUE_NAME/>
		</T_ISSUE>
		<xrs:Constraint>PK_ISSUE_ID=@ISSUE_ID</xrs:Constraint>
	</xrs:RowSet>
	<xrs:RowSet name="CountryData">
		<T_SPATIAL>
			<SPATIAL_NAME/>
		</T_SPATIAL>
		<xrs:Constraint>PK_SPATIAL_ID=@COUNTRY_ID</xrs:Constraint>
	</xrs:RowSet>
</xrs:XmlData>
