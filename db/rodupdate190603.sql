ALTER TABLE T_SPATIAL ADD SPATIAL_ISMEMBERCOUNTRY ENUM("Y", "N");

UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="EU" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="N" WHERE SPATIAL_TWOLETTER="AL" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="AT" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="BE" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="N" WHERE SPATIAL_TWOLETTER="BA" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="BG" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="N" WHERE SPATIAL_TWOLETTER="HR" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="CY" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="CZ" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="DK" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="EE" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="FI" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="FR" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="DE" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="GR" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="HU" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="IS" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="IE" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="IT" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="LV" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="LI" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="LT" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="LU" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="N" WHERE SPATIAL_TWOLETTER="MK" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="MT" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="N" WHERE SPATIAL_TWOLETTER="MC" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="NL" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="NO" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="PL" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="PT" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="RO" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="N" WHERE SPATIAL_TWOLETTER="YU" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="SK" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="SI" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="ES" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="SE" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="N" WHERE SPATIAL_TWOLETTER="CH" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="TR" AND SPATIAL_TYPE="C";
UPDATE T_SPATIAL SET SPATIAL_ISMEMBERCOUNTRY="Y" WHERE SPATIAL_TWOLETTER="UK" AND SPATIAL_TYPE="C";

DELETE FROM T_SPATIAL WHERE SPATIAL_TYPE="C" AND SPATIAL_ISMEMBERCOUNTRY=NULL;

CREATE TABLE T_CLIENT_LNK (FK_CLIENT_ID INT(10), FK_OBJECT_ID INT(10), TYPE CHAR(1), STATUS CHAR(1));
INSERT INTO T_CLIENT_LNK (FK_CLIENT_ID, FK_OBJECT_ID, TYPE, STATUS) SELECT FK_CLIENT_ID, PK_RO_ID, "R", "M" FROM T_REPORTING WHERE FK_CLIENT_ID IS NOT NULL AND FK_CLIENT_ID > 0;
INSERT INTO T_CLIENT_LNK (FK_CLIENT_ID, FK_OBJECT_ID, TYPE, STATUS) SELECT FK_CLIENT_ID, PK_SOURCE_ID, "S", "M" FROM T_SOURCE WHERE FK_CLIENT_ID IS NOT NULL AND FK_CLIENT_ID > 0;
